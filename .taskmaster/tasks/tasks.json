{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "Project Setup and Dependency Installation",
        "description": "Set up the React/Next.js project environment with Tailwind CSS, ensuring compatibility with existing TSNoteCard component and react-pdf library.",
        "details": "1.  Verify Node.js and npm are installed (>=18.x and >=8.x respectively).\n2.  Initialize a new Next.js project or navigate to the existing project directory.\n3.  Install Tailwind CSS and its dependencies: `npm install -D tailwindcss postcss autoprefixer`\n4.  Configure Tailwind CSS by running `npx tailwindcss init -p` and updating `tailwind.config.js` with necessary configurations.\n5.  Install `react-pdf` library: `npm install react-pdf`\n6.  Verify that the TSNoteCard component is correctly set up and styled.\n7.  Address any compatibility issues between Tailwind CSS and existing styles.\n8.  Create necessary folders and files for components and utilities.",
        "testStrategy": "1.  Run the development server (`npm run dev`) and ensure the application compiles without errors.\n2.  Verify that Tailwind CSS styles are applied correctly.\n3.  Check that the TSNoteCard component renders as expected.\n4.  Ensure `react-pdf` is installed correctly and can be imported.",
        "priority": "high",
        "dependencies": [],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "Implement View Mode State Management",
        "description": "Implement the view mode state management using React's useState hook, including the 'grid' and 'more' modes.",
        "details": "1.  In the main dashboard component, declare a state variable `viewMode` using `useState('grid')`.\n2.  Create a function `setViewMode` to update the `viewMode` state.\n3.  Pass the `viewMode` state and `setViewMode` function to the relevant components.\n4.  Implement logic to switch between 'grid' and 'more' modes based on user interaction (e.g., button click).\n5.  Ensure the initial state is set to 'grid'.",
        "testStrategy": "1.  Verify that the `viewMode` state is initialized correctly.\n2.  Test the functionality to switch between 'grid' and 'more' modes.\n3.  Ensure that the UI updates correctly when the `viewMode` changes.\n4.  Check for any unexpected side effects when updating the state.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 3,
        "title": "Implement Memo Card Loading and 'ë”ë³´ê¸°' Functionality",
        "description": "Modify the dashboard to initially load only the recent 3 memo cards in 'grid' mode and implement the 'ë”ë³´ê¸°' (more) button functionality to load all memo cards.",
        "details": "1.  Fetch the initial 3 memo cards and store them in a state variable `recentMemos`.\n2.  Display `recentMemos` in a 3-column grid layout when `viewMode` is 'grid'.\n3.  Implement an API call to fetch all memo cards when the 'ë”ë³´ê¸°' button is clicked.\n4.  Store all memo cards in a state variable `allMemos`.\n5.  Update the UI to display `allMemos` in a 6-column grid layout when `viewMode` is 'more'.\n6.  Implement error handling for the API call.",
        "testStrategy": "1.  Verify that only 3 memo cards are loaded initially in 'grid' mode.\n2.  Test the 'ë”ë³´ê¸°' button to ensure all memo cards are loaded and displayed in 'more' mode.\n3.  Check for correct grid layout in both 'grid' and 'more' modes.\n4.  Test error handling for API call failures.",
        "priority": "high",
        "dependencies": [
          2
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 4,
        "title": "Implement UI Components for Grid and More Views",
        "description": "Implement the UI components for both Grid and More views, ensuring the correct layout and styling.",
        "details": "1.  Create a `GridView` component to display memo cards in a 3-column grid layout.\n2.  Create a `MoreView` component to display memo cards in a 6-column grid layout.\n3.  Use Tailwind CSS to style the components, ensuring responsiveness.\n4.  Implement smaller card sizes in `MoreView`.\n5.  Ensure the `TSNoteCard` component is reused in both views.",
        "testStrategy": "1.  Verify that the `GridView` component displays memo cards in a 3-column grid.\n2.  Verify that the `MoreView` component displays memo cards in a 6-column grid.\n3.  Check for correct styling and responsiveness in both views.\n4.  Ensure that the `TSNoteCard` component is rendered correctly in both views.",
        "priority": "medium",
        "dependencies": [
          3
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "Implement Hover Animation",
        "description": "Add hover animation to the memo cards in the 'more' view using Tailwind CSS.",
        "details": "1.  Add the `hover:scale-110` class to the `TSNoteCard` component in the `MoreView`.\n2.  Add the `transition-all duration-300 ease-out` class to the `TSNoteCard` component to ensure a smooth animation.\n3.  Test the hover animation to ensure it scales the card up smoothly.",
        "testStrategy": "1.  Verify that the memo cards scale up on hover in the `MoreView`.\n2.  Check that the animation is smooth and lasts for 300ms.\n3.  Ensure that the animation does not cause any layout shifts.",
        "priority": "medium",
        "dependencies": [
          4
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 6,
        "title": "Implement Continuous Vertical Scrolling in PDF Viewer",
        "description": "Modify PdfViewer.tsx to enable continuous vertical scrolling, stacking all pages vertically.",
        "details": "1.  Modify the `PdfViewer.tsx` component to render all pages of the PDF in a vertical stack.\n2.  Remove the existing page navigation buttons.\n3.  Adjust the container height and styles to accommodate the continuous scroll.\n4.  Ensure the existing props interface is maintained.",
        "testStrategy": "1.  Verify that all pages are rendered in a vertical stack.\n2.  Check that the page navigation buttons are removed.\n3.  Ensure the container height and styles are adjusted correctly.\n4.  Test that the existing props interface is maintained.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 7,
        "title": "Implement Lazy Loading with IntersectionObserver",
        "description": "Implement lazy loading using IntersectionObserver to optimize performance for large PDFs.",
        "details": "1.  Use `IntersectionObserver` to detect when a page enters the viewport.\n2.  Only render pages that are currently in or near the viewport.\n3.  Implement a placeholder for pages that are not yet rendered.\n4.  Optimize memory usage by unloading pages that are far from the viewport.",
        "testStrategy": "1.  Verify that only pages in or near the viewport are rendered.\n2.  Check that placeholders are displayed for pages that are not yet rendered.\n3.  Monitor memory usage to ensure it is optimized.\n4.  Test scrolling performance with large PDFs (100+ pages).",
        "priority": "high",
        "dependencies": [
          6
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 8,
        "title": "Implement Scroll-Based Page Tracking and Control Bar Synchronization",
        "description": "Implement scroll-based page tracking and synchronize it with the control bar, ensuring compatibility with existing highlight and text selection features.",
        "details": "1.  Use the `IntersectionObserver` to track the currently visible page based on scroll position.\n2.  Update the control bar to reflect the current page number.\n3.  Ensure that the highlight overlay and text selection features continue to function correctly.\n4.  Maintain compatibility with existing zoom and rotation features.",
        "testStrategy": "1.  Verify that the control bar updates correctly as the user scrolls.\n2.  Check that the highlight overlay and text selection features continue to function correctly.\n3.  Ensure compatibility with existing zoom and rotation features.\n4.  Test with various PDF documents to ensure consistent behavior.",
        "priority": "high",
        "dependencies": [
          7
        ],
        "status": "pending",
        "subtasks": [
          {
            "id": 1,
            "title": "Implement IntersectionObserver-based Page Tracking",
            "description": "Set up IntersectionObserver to track which page is currently in view based on scroll position. Determine the logic for identifying the 'current' page when multiple pages are partially visible.",
            "dependencies": [],
            "details": "Use IntersectionObserver API to monitor the visibility of each page element. Define a threshold for determining when a page is considered 'in view'. Handle edge cases where multiple pages are partially visible.",
            "status": "pending",
            "testStrategy": ""
          },
          {
            "id": 2,
            "title": "Implement Control Bar Update Logic",
            "description": "Develop the logic to update the control bar with the current page information based on the output from the IntersectionObserver. Ensure the control bar accurately reflects the currently viewed page.",
            "dependencies": [
              1
            ],
            "details": "Create a function that receives the current page information from the IntersectionObserver and updates the control bar's page number display. Handle cases where no page is in view (e.g., at the very beginning or end of the document).",
            "status": "pending",
            "testStrategy": ""
          },
          {
            "id": 3,
            "title": "Ensure Compatibility with Highlight and Text Selection",
            "description": "Test and ensure that the scroll-based page tracking and control bar synchronization do not interfere with existing highlight and text selection functionalities. Address any conflicts that arise.",
            "dependencies": [
              1,
              2
            ],
            "details": "Test highlighting and text selection on different pages after implementing the scroll-based tracking. Identify and resolve any issues where the tracking logic prevents or disrupts highlighting or text selection.",
            "status": "pending",
            "testStrategy": ""
          },
          {
            "id": 4,
            "title": "Ensure Compatibility with Zoom and Rotation",
            "description": "Test and ensure that the scroll-based page tracking and control bar synchronization remain accurate and functional when the document is zoomed in/out or rotated. Adjust the IntersectionObserver thresholds or logic as needed.",
            "dependencies": [
              1,
              2
            ],
            "details": "Test the page tracking and control bar updates at different zoom levels and rotations. Adjust the IntersectionObserver's thresholds or the page detection logic to maintain accuracy under these conditions.",
            "status": "pending",
            "testStrategy": ""
          }
        ]
      }
    ],
    "metadata": {
      "created": "2025-07-07T08:48:57.524Z",
      "updated": "2025-07-07T08:49:24.607Z",
      "description": "Tasks for pdf-scroll-feature context"
    }
  },
  "pdf-knowledge-capture": {
    "tasks": [
      {
        "id": 1,
        "title": "Implement PDF Upload API and Update Book Model",
        "description": "Extend the Book model with pdfUrl and pdfFileSize fields and implement an API endpoint for uploading PDF files to cloud storage, including server-side validation.",
        "details": "1.  Modify the Book model in the database schema to include the `pdfUrl` (string) and `pdfFileSize` (integer) fields.\n2.  Implement a new API endpoint `/books/{bookId}/upload-pdf` that accepts a PDF file as input.\n3.  Implement server-side validation to check the file format (must be PDF) and file size (must be less than 20MB).\n4.  Upon successful validation, upload the PDF file to cloud storage (e.g., AWS S3, Google Cloud Storage, or Azure Blob Storage).\n5.  Store the URL of the uploaded PDF file in the `pdfUrl` field of the Book model.\n6.  Store the size of the uploaded PDF file in the `pdfFileSize` field of the Book model.\n7.  Return a success response with the updated Book model.\n8.  Handle potential errors such as invalid file format, file size exceeding the limit, and cloud storage upload failures, returning appropriate error responses.",
        "testStrategy": "1.  Create a test PDF file.\n2.  Send a POST request to the `/books/{bookId}/upload-pdf` endpoint with the test PDF file.\n3.  Verify that the API returns a success response with the updated Book model, including the `pdfUrl` and `pdfFileSize` fields.\n4.  Verify that the PDF file is successfully uploaded to cloud storage.\n5.  Verify that the `pdfUrl` field in the Book model contains the correct URL of the uploaded PDF file.\n6.  Verify that the `pdfFileSize` field in the Book model contains the correct size of the uploaded PDF file.\n7.  Test with a file larger than 20MB and verify that the API returns an error response.\n8.  Test with a non-PDF file and verify that the API returns an error response.\n9.  Test error handling for cloud storage upload failures.",
        "status": "done",
        "dependencies": [],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "í˜„ì¬ ë°±ì—”ë“œ êµ¬ì¡° ë¶„ì„",
            "description": "backend/ í´ë”ì˜ ê¸°ì¡´ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ Prisma ìŠ¤í‚¤ë§ˆì™€ Book ëª¨ë¸ êµ¬ì¡°ë¥¼ íŒŒì•…í•œë‹¤",
            "details": "- backend/prisma/schema.prisma íŒŒì¼ í™•ì¸\n- Book ëª¨ë¸ì˜ í˜„ì¬ í•„ë“œ êµ¬ì¡° íŒŒì•…\n- ê¸°ì¡´ Book ê´€ë ¨ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸\n- íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ ê¸°ì¡´ êµ¬í˜„ í™•ì¸\n<info added on 2025-07-07T03:14:11.703Z>\n**í˜„ì¬ ìƒí™©:**\n- í”„ë¡œì íŠ¸ëŠ” MongoDB + Mongoose ì‚¬ìš©\n- Book ëª¨ë¸ì€ `backend/src/models/Book.ts`ì— ì •ì˜\n- Book APIëŠ” `backend/src/routes/books.ts`ì— êµ¬í˜„\n- ì´ë¯¸ multerë¥¼ ì‚¬ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì¡´ì¬ (5MB ì œí•œ)\n- ì—…ë¡œë“œ ë””ë ‰í† ë¦¬: `uploads/` (í”„ë¡œì íŠ¸ ë£¨íŠ¸)\n\n**Book ëª¨ë¸ í˜„ì¬ í•„ë“œ:**\n- userId, title, author, bookType, totalPages, currentPage\n- isbn, coverImage, category, status, completionPercentage\n- estimatedRemainingMinutes, avgPpm, readingPurpose, purchaseLink\n- createdAt, updatedAt (timestamps)\n\n**ë‹¤ìŒ ë‹¨ê³„:**\n1. Book ëª¨ë¸ì— pdfUrl, pdfFileSize í•„ë“œ ì¶”ê°€\n2. PDF íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ multer ì„¤ì • ì¶”ê°€\n3. PDF ì—…ë¡œë“œ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„\n4. PDF íŒŒì¼ ê²€ì¦ ë¡œì§ êµ¬í˜„\n</info added on 2025-07-07T03:14:11.703Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 1
          },
          {
            "id": 2,
            "title": "Book ëª¨ë¸ì— PDF í•„ë“œ ì¶”ê°€",
            "description": "Book ëª¨ë¸ì˜ ì¸í„°í˜ì´ìŠ¤ì™€ ìŠ¤í‚¤ë§ˆì— pdfUrlê³¼ pdfFileSize í•„ë“œë¥¼ ì¶”ê°€í•œë‹¤",
            "details": "- IBook ì¸í„°í˜ì´ìŠ¤ì— pdfUrl?: string, pdfFileSize?: number í•„ë“œ ì¶”ê°€\n- BookSchemaì— í•´ë‹¹ í•„ë“œë“¤ì˜ Mongoose ìŠ¤í‚¤ë§ˆ ì •ì˜ ì¶”ê°€\n- ê¸°ì¡´ Book íƒ€ì…ê³¼ì˜ í˜¸í™˜ì„± ìœ ì§€\n<info added on 2025-07-07T03:15:28.807Z>\n- pdfUrlì€ String íƒ€ì…, trim ì ìš©, ê¸°ë³¸ê°’ null\n- pdfFileSizeëŠ” Number íƒ€ì…, ìµœì†Œê°’ 0, ê¸°ë³¸ê°’ null\n- backend/src/models/Book.ts íŒŒì¼ ìˆ˜ì •\n- ê¸°ì¡´ í•„ë“œë“¤ì—ëŠ” ì˜í–¥ ì—†ìŒ\n- ìƒˆë¡œìš´ í•„ë“œë“¤ì€ ì˜µì…”ë„ì´ë¯€ë¡œ ê¸°ì¡´ ë°ì´í„°ì™€ í˜¸í™˜\n</info added on 2025-07-07T03:15:28.807Z>",
            "status": "done",
            "dependencies": [
              1
            ],
            "parentTaskId": 1
          },
          {
            "id": 3,
            "title": "PDF ì—…ë¡œë“œë¥¼ ìœ„í•œ multer ì„¤ì • êµ¬ì„±",
            "description": "PDF íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•œ ë³„ë„ì˜ multer ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  PDF íŒŒì¼ ê²€ì¦ ë¡œì§ì„ êµ¬í˜„í•œë‹¤",
            "details": "- PDF íŒŒì¼ë§Œ í—ˆìš©í•˜ëŠ” fileFilter í•¨ìˆ˜ êµ¬í˜„\n- 20MB íŒŒì¼ í¬ê¸° ì œí•œ ì„¤ì •\n- PDF ì „ìš© ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ì„¤ì • (uploads/pdfs/)\n- MIME íƒ€ì… ê²€ì¦ (application/pdf)\n- íŒŒì¼ í™•ì¥ì ê²€ì¦ (.pdf)\n<info added on 2025-07-07T03:16:36.856Z>\nPDF ì—…ë¡œë“œ multer ì„¤ì • ì™„ë£Œ:\n\n**ì™„ë£Œëœ ì‘ì—…:**\n- PDF ì „ìš© ì—…ë¡œë“œ ë””ë ‰í† ë¦¬ ìƒì„± (uploads/pdfs/)\n- PDF íŒŒì¼ ì „ìš© multer ì¸ìŠ¤í„´ìŠ¤ (uploadPdf) êµ¬ì„±\n- PDF íŒŒì¼ ê²€ì¦ ë¡œì§ êµ¬í˜„:\n  - MIME íƒ€ì… ê²€ì¦: application/pdfë§Œ í—ˆìš©\n  - íŒŒì¼ í™•ì¥ì ê²€ì¦: .pdf í™•ì¥ìë§Œ í—ˆìš©\n  - íŒŒì¼ í¬ê¸° ì œí•œ: 20MB\n- ìƒì„¸í•œ ë¡œê¹… ì¶”ê°€ë¡œ ë””ë²„ê¹… ìš©ì´ì„± í™•ë³´\n- ê¸°ì¡´ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ê³¼ ë¶„ë¦¬í•˜ì—¬ ë…ë¦½ì  ìš´ì˜\n\n**ë³€ê²½ ì‚¬í•­:**\n- backend/src/routes/books.ts íŒŒì¼ì— PDF ì—…ë¡œë“œ ì„¤ì • ì¶”ê°€\n- pdfStorage, pdfFileFilter, uploadPdf ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\n- ì—ëŸ¬ ë©”ì‹œì§€ í•œêµ­ì–´ë¡œ ì‚¬ìš©ì ì¹œí™”ì  êµ¬ì„±\n</info added on 2025-07-07T03:16:36.856Z>",
            "status": "done",
            "dependencies": [
              2
            ],
            "parentTaskId": 1
          },
          {
            "id": 4,
            "title": "PDF ì—…ë¡œë“œ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„",
            "description": "ì±…ì— PDF íŒŒì¼ì„ ì—…ë¡œë“œí•˜ëŠ” API ì—”ë“œí¬ì¸íŠ¸ë¥¼ êµ¬í˜„í•˜ê³  Book ëª¨ë¸ì„ ì—…ë°ì´íŠ¸í•œë‹¤",
            "details": "- POST /books/:bookId/upload-pdf ì—”ë“œí¬ì¸íŠ¸ ìƒì„±\n- bookControllerì— uploadPdf í•¨ìˆ˜ êµ¬í˜„\n- ì—…ë¡œë“œëœ PDF íŒŒì¼ ì •ë³´ë¥¼ Book ëª¨ë¸ì— ì €ì¥\n- íŒŒì¼ URLê³¼ í¬ê¸° ì •ë³´ ì—…ë°ì´íŠ¸\n- ì—ëŸ¬ í•¸ë“¤ë§ ë° ê²€ì¦ ë¡œì§ ì¶”ê°€\n- ì‘ë‹µ í˜•ì‹ ì •ì˜\n<info added on 2025-07-07T03:19:34.472Z>\n**ì™„ë£Œëœ ì‘ì—…:**\n- POST /books/:bookId/upload-pdf ì—”ë“œí¬ì¸íŠ¸ ìƒì„±\n- bookControllerì— uploadPdf í•¨ìˆ˜ êµ¬í˜„\n- ì—…ë¡œë“œëœ PDF íŒŒì¼ ì •ë³´ë¥¼ Book ëª¨ë¸ì— ì €ì¥ (pdfUrl, pdfFileSize)\n- ìƒì„¸í•œ ì—ëŸ¬ í•¸ë“¤ë§ ë° ê²€ì¦ ë¡œì§:\n  - ì‚¬ìš©ì ì¸ì¦ í™•ì¸\n  - íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸\n  - ì±… ì†Œìœ ê¶Œ í™•ì¸\n  - ê¸°ì¡´ PDF íŒŒì¼ ì‚­ì œ (êµì²´ ì‹œ)\n  - ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ íŒŒì¼ ì •ë¦¬\n- ì‘ë‹µ í˜•ì‹ ì •ì˜ (ì„±ê³µ ë©”ì‹œì§€, ì—…ë°ì´íŠ¸ëœ ì±… ì •ë³´, PDF ì •ë³´)\n- multer ì¸ìŠ¤í„´ìŠ¤ ì´ë¦„ ì¶©ëŒ í•´ê²° (pdfUploadë¡œ ë³€ê²½)\n\n**API ì‚¬ìš©ë²•:**\n- POST /books/:bookId/upload-pdf\n- Content-Type: multipart/form-data\n- Field name: pdfFile\n- ìµœëŒ€ íŒŒì¼ í¬ê¸°: 20MB\n- ì§€ì› í˜•ì‹: PDF (.pdf, application/pdf)\n\n**ì‘ë‹µ í˜•ì‹:**\n```json\n{\n  \"message\": \"PDF íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\",\n  \"book\": { /* ì—…ë°ì´íŠ¸ëœ ì±… ì •ë³´ */ },\n  \"pdfInfo\": {\n    \"originalName\": \"document.pdf\",\n    \"url\": \"/uploads/pdfs/pdfFile-1234567890-123456789.pdf\",\n    \"size\": 1234567\n  }\n}\n```\n</info added on 2025-07-07T03:19:34.472Z>",
            "status": "done",
            "dependencies": [
              3
            ],
            "parentTaskId": 1
          }
        ]
      },
      {
        "id": 2,
        "title": "Implement PDF Upload Book Registration UI",
        "description": "Implement the UI for registering books via PDF upload, adding a 'Register via PDF' tab to the existing book registration page. This includes file upload, drag-and-drop functionality, and automatic metadata extraction using pdf.js.",
        "details": "1.  Modify the existing book registration page to include a new tab labeled 'Register via PDF'.\n2.  Implement a file upload component within the 'Register via PDF' tab, allowing users to select PDF files from their local system.\n3.  Implement drag-and-drop functionality for PDF files onto the upload component.\n4.  Integrate pdf.js to extract metadata from the uploaded PDF file, including title, author, and other relevant information.\n5.  Automatically populate the corresponding form fields on the book registration page with the extracted metadata.\n6.  Handle cases where metadata extraction fails or is incomplete, providing users with the option to manually enter the missing information.\n7.  Ensure the UI is responsive and handles large PDF files efficiently, providing appropriate loading indicators.\n8.  Implement client-side validation to ensure that only PDF files are accepted.\n9.  Consider accessibility requirements when designing the UI, ensuring it is usable by people with disabilities.",
        "testStrategy": "1.  Upload a variety of PDF files with different metadata structures.\n2.  Verify that the metadata is correctly extracted and populated into the corresponding form fields.\n3.  Test the drag-and-drop functionality with different PDF files.\n4.  Test the UI with large PDF files to ensure it remains responsive.\n5.  Verify that the client-side validation prevents non-PDF files from being uploaded.\n6.  Manually enter data into the form fields and submit the form to ensure that the data is correctly saved.\n7.  Test the UI on different browsers and devices to ensure compatibility.\n8.  Verify that the UI is accessible to users with disabilities, using assistive technologies such as screen readers.",
        "status": "done",
        "dependencies": [
          1
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "PDF.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ë° ì„¤ì •",
            "description": "PDF ë©”íƒ€ë°ì´í„° ì¶”ì¶œì„ ìœ„í•œ PDF.js ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í”„ë¡ íŠ¸ì—”ë“œì— ì„¤ì¹˜í•˜ê³  ì„¤ì •í•©ë‹ˆë‹¤.",
            "details": "- npm install pdfjs-dist ì‹¤í–‰\n- PDF.js worker ì„¤ì •\n- TypeScript íƒ€ì… ì •ì˜ ì¶”ê°€\n- ê¸°ë³¸ PDF íŒŒì‹± í•¨ìˆ˜ êµ¬í˜„\n<info added on 2025-07-07T03:26:31.637Z>\n**êµ¬í˜„ ë‚´ìš©:**\n1. âœ… pdfjs-dist ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì™„ë£Œ\n2. âœ… @types/pdfjs-dist TypeScript íƒ€ì… ì •ì˜ ì„¤ì¹˜ ì™„ë£Œ\n3. âœ… frontend/lib/pdfUtils.ts íŒŒì¼ ìƒì„±\n4. âœ… PDF.js worker ì„¤ì • êµ¬í˜„\n5. âœ… PDF ë©”íƒ€ë°ì´í„° ì¶”ì¶œ í•¨ìˆ˜ êµ¬í˜„\n6. âœ… PDF íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜ êµ¬í˜„\n7. âœ… íŒŒì¼ í¬ê¸° í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ êµ¬í˜„\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- extractPdfMetadata(): PDFì—ì„œ ì œëª©, ì €ì, í˜ì´ì§€ ìˆ˜ ì¶”ì¶œ\n- validatePdfFile(): PDF íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬ (íƒ€ì…, í¬ê¸°, í™•ì¥ì)\n- formatFileSize(): íŒŒì¼ í¬ê¸°ë¥¼ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜\n- 20MB íŒŒì¼ í¬ê¸° ì œí•œ\n- ì—ëŸ¬ í•¸ë“¤ë§ ë° í´ë°± ë¡œì§ í¬í•¨\n\n**TypeScript íƒ€ì…:**\n- PdfMetadata ì¸í„°í˜ì´ìŠ¤\n- PdfExtractionResult ì¸í„°í˜ì´ìŠ¤\n- ì™„ì „í•œ íƒ€ì… ì•ˆì „ì„± ë³´ì¥\n</info added on 2025-07-07T03:26:31.637Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 2
          },
          {
            "id": 2,
            "title": "PDF ì—…ë¡œë“œ UI ì»´í¬ë„ŒíŠ¸ ìƒì„±",
            "description": "ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ì´ í¬í•¨ëœ PDF ì—…ë¡œë“œ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.",
            "details": "- PdfUploadComponent.tsx íŒŒì¼ ìƒì„±\n- ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ êµ¬í˜„\n- PDF íŒŒì¼ ê²€ì¦ ë¡œì§\n- ì—…ë¡œë“œ ì§„í–‰ìƒíƒœ í‘œì‹œ\n- ì—ëŸ¬ í•¸ë“¤ë§ UI\n<info added on 2025-07-07T03:28:14.881Z>\n**êµ¬í˜„ ë‚´ìš©:**\n1. âœ… PdfUploadComponent.tsx ì»´í¬ë„ŒíŠ¸ ìƒì„± ì™„ë£Œ\n2. âœ… ë“œë˜ê·¸ì•¤ë“œë¡­ ê¸°ëŠ¥ êµ¬í˜„\n3. âœ… PDF íŒŒì¼ ê²€ì¦ ë¡œì§ êµ¬í˜„\n4. âœ… ì—…ë¡œë“œ ì§„í–‰ìƒíƒœ í‘œì‹œ êµ¬í˜„\n5. âœ… ì—ëŸ¬ í•¸ë“¤ë§ UI êµ¬í˜„\n6. âœ… ë©”íƒ€ë°ì´í„° í‘œì‹œ UI êµ¬í˜„\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ PDF íŒŒì¼ ì—…ë¡œë“œ\n- ì‹¤ì‹œê°„ íŒŒì¼ ìœ íš¨ì„± ê²€ì¦ (íƒ€ì…, í¬ê¸°, í™•ì¥ì)\n- PDF ë©”íƒ€ë°ì´í„° ìë™ ì¶”ì¶œ ë° í‘œì‹œ\n- ë¡œë”© ìƒíƒœ ë° ì§„í–‰ë¥  í‘œì‹œ\n- ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€ ë° ê²½ê³ \n- ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´ ë¯¸ë¦¬ë³´ê¸°\n- íŒŒì¼ ì œê±° ê¸°ëŠ¥\n\n**UI/UX íŠ¹ì§•:**\n- Habitus33 ì‚¬ì´ë²„í‘í¬ í…Œë§ˆ ì ìš©\n- ë°˜ì‘í˜• ë””ìì¸\n- ì ‘ê·¼ì„± ê³ ë ¤ (í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜, ìŠ¤í¬ë¦° ë¦¬ë”)\n- ì§ê´€ì ì¸ ì•„ì´ì½˜ ë° ìƒíƒœ í‘œì‹œ\n- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼\n\n**ê¸°ìˆ ì  íŠ¹ì§•:**\n- TypeScript ì™„ì „ ì§€ì›\n- React hooks í™œìš© (useState, useRef, useCallback)\n- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€\n- ì—ëŸ¬ ê²½ê³„ ì²˜ë¦¬\n- ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„± ê³ ë ¤\n</info added on 2025-07-07T03:28:14.881Z>",
            "status": "done",
            "dependencies": [
              "2.1"
            ],
            "parentTaskId": 2
          },
          {
            "id": 3,
            "title": "PDF ë©”íƒ€ë°ì´í„° ì¶”ì¶œ í•¨ìˆ˜ êµ¬í˜„",
            "description": "PDF.jsë¥¼ ì‚¬ìš©í•˜ì—¬ PDF íŒŒì¼ì—ì„œ ë©”íƒ€ë°ì´í„°(ì œëª©, ì €ì, í˜ì´ì§€ ìˆ˜)ë¥¼ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.",
            "details": "- extractPdfMetadata í•¨ìˆ˜ êµ¬í˜„\n- PDF ë¬¸ì„œ ì •ë³´ íŒŒì‹±\n- ì œëª©, ì €ì, í˜ì´ì§€ ìˆ˜ ì¶”ì¶œ\n- ì—ëŸ¬ í•¸ë“¤ë§ ë° í´ë°± ë¡œì§\n- TypeScript íƒ€ì… ì •ì˜",
            "status": "done",
            "dependencies": [
              "2.1"
            ],
            "parentTaskId": 2
          },
          {
            "id": 4,
            "title": "ê¸°ì¡´ ì±… ë“±ë¡ í˜ì´ì§€ì— PDF ì—…ë¡œë“œ ê¸°ëŠ¥ í†µí•©",
            "description": "ê¸°ì¡´ /books/new/page.tsxì— PDF ì—…ë¡œë“œ ê¸°ëŠ¥ì„ í†µí•©í•˜ê³  ìë™ í¼ ì±„ìš°ê¸° ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.",
            "details": "- ê¸°ì¡´ í¼ì— PDF ì—…ë¡œë“œ ì„¹ì…˜ ì¶”ê°€\n- PDF ì—…ë¡œë“œ ì‹œ ìë™ í¼ í•„ë“œ ì±„ìš°ê¸°\n- ìˆ˜ë™ ì…ë ¥ê³¼ PDF ì—…ë¡œë“œ ë°©ì‹ ë³‘í–‰ ì§€ì›\n- ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì¡°ì •\n- ìƒíƒœ ê´€ë¦¬ ë¡œì§ êµ¬í˜„\n<info added on 2025-07-07T03:31:31.278Z>\n**êµ¬í˜„ ë‚´ìš©:**\n1. âœ… ê¸°ì¡´ ì±… ë“±ë¡ í˜ì´ì§€ì— PDF ì—…ë¡œë“œ ê¸°ëŠ¥ í†µí•© ì™„ë£Œ\n2. âœ… PDF ì—…ë¡œë“œ ìƒíƒœ ê´€ë¦¬ ì¶”ê°€ (pdfFile, pdfMetadata, inputMethod)\n3. âœ… PDF ì—…ë¡œë“œ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ êµ¬í˜„ (handlePdfSelected, handlePdfError, clearPdfFile)\n4. âœ… ìë™ í¼ ì±„ìš°ê¸° ê¸°ëŠ¥ êµ¬í˜„ (ì œëª©, ì €ì, í˜ì´ì§€ ìˆ˜)\n5. âœ… ìˆ˜ë™ ì…ë ¥ê³¼ PDF ì—…ë¡œë“œ ë°©ì‹ ë³‘í–‰ ì§€ì›\n6. âœ… PDF ì—…ë¡œë“œ UI ì„¹ì…˜ ì¶”ê°€ (ì˜¤ë¥¸ìª½ ì»¬ëŸ¼)\n7. âœ… ì±… ë“±ë¡ í›„ PDF ì—…ë¡œë“œ API ì—°ë™\n8. âœ… ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì¡°ì •\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- PDF íŒŒì¼ ì—…ë¡œë“œ ì‹œ ë©”íƒ€ë°ì´í„° ìë™ ì¶”ì¶œ ë° í¼ í•„ë“œ ìë™ ì±„ìš°ê¸°\n- ìˆ˜ë™ ì…ë ¥ ëª¨ë“œì™€ PDF ëª¨ë“œ ê°„ ì „í™˜ ê°€ëŠ¥\n- PDF ì—…ë¡œë“œ ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ í‘œì‹œ\n- ì±… ë“±ë¡ í›„ ìë™ PDF ì—…ë¡œë“œ ì²˜ë¦¬\n- PDF ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œì—ë„ ì±… ë“±ë¡ì€ ìœ ì§€ (ë¶€ë¶„ ì„±ê³µ ì²˜ë¦¬)\n\n**UI/UX ê°œì„ :**\n- ì§ê´€ì ì¸ PDF ì—…ë¡œë“œ ì¸í„°í˜ì´ìŠ¤\n- ìë™ ì¶”ì¶œëœ ì •ë³´ í‘œì‹œ ë° ì•ˆë‚´\n- ì‚¬ìš©ì í”¼ë“œë°± ë©”ì‹œì§€ (ì„±ê³µ/ì‹¤íŒ¨/ì§„í–‰ ìƒíƒœ)\n- ê¸°ì¡´ ë””ìì¸ê³¼ ì¼ê´€ì„± ìœ ì§€\n\n**ì—ëŸ¬ ì²˜ë¦¬:**\n- PDF ì—…ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€\n- ë¶€ë¶„ ì„±ê³µ ì‹œë‚˜ë¦¬ì˜¤ ì²˜ë¦¬ (ì±… ë“±ë¡ ì„±ê³µ, PDF ì—…ë¡œë“œ ì‹¤íŒ¨)\n- ì‚¬ìš©ì ì¹œí™”ì ì¸ ì˜¤ë¥˜ ì•ˆë‚´\n</info added on 2025-07-07T03:31:31.278Z>",
            "status": "done",
            "dependencies": [
              "2.2",
              "2.3"
            ],
            "parentTaskId": 2
          }
        ]
      },
      {
        "id": 3,
        "title": "Integrate PDF Viewer and Implement Highlighting in TS Reading Session",
        "description": "Integrate a PDF viewer into the TS reading session page using react-pdf and implement a rounded-corner highlighting feature using SVG overlays. This includes text selection, coordinate calculation, and PDF note modal invocation.",
        "details": "1. Integrate the react-pdf library into the TS reading session page.\n2. Implement an SVG overlay to enable rounded-corner highlighting functionality.\n3. Implement text selection functionality within the PDF viewer.\n4. Calculate text coordinates upon selection for highlighting purposes.\n5. Implement a PDF note modal that is invoked upon text selection, allowing users to add notes to highlighted sections.\n6. Ensure the highlighting feature is visually appealing with rounded corners and a subtle color scheme.\n7. Optimize the PDF viewer for performance, ensuring smooth scrolling and rendering even with large PDF documents.\n8. Implement error handling for cases where PDF loading fails or the PDF format is invalid.",
        "testStrategy": "1. Load various PDF documents into the TS reading session page to test the PDF viewer integration.\n2. Select text within the PDF viewer and verify that the rounded-corner highlighting is applied correctly.\n3. Test the text selection functionality with different text sizes and fonts.\n4. Verify that the correct text coordinates are calculated upon selection.\n5. Invoke the PDF note modal and ensure that it displays correctly with the selected text.\n6. Test the performance of the PDF viewer with large PDF documents, ensuring smooth scrolling and rendering.\n7. Simulate PDF loading errors and invalid PDF formats to verify that the error handling is implemented correctly.",
        "status": "done",
        "dependencies": [
          1,
          2
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "react-pdf ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ë° ì„¤ì •",
            "description": "react-pdf ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ê³  í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê¸°ë³¸ ì„¤ì •ì„ êµ¬ì„±í•©ë‹ˆë‹¤.",
            "details": "- react-pdf ë° í•„ìš”í•œ peer dependencies ì„¤ì¹˜\\n- PDF ë·°ì–´ ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ ì„¤ì •\\n- TypeScript íƒ€ì… ì •ì˜ ì¶”ê°€\\n- Worker ì„¤ì • ë° ìµœì í™”\n<info added on 2025-07-07T03:36:49.893Z>\n**êµ¬í˜„ ë‚´ìš©:**\n1. âœ… react-pdf ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì™„ë£Œ\n2. âœ… @types/react-pdf TypeScript íƒ€ì… ì •ì˜ ì„¤ì¹˜ ì™„ë£Œ\n3. âœ… PdfViewer.tsx ì»´í¬ë„ŒíŠ¸ ìƒì„± ì™„ë£Œ\n4. âœ… PDF.js worker ì„¤ì • êµ¬í˜„\n5. âœ… ê¸°ë³¸ PDF ë·°ì–´ ê¸°ëŠ¥ êµ¬í˜„\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- ì™„ì „í•œ PDF ë¬¸ì„œ ë Œë”ë§\n- í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ (ì´ì „/ë‹¤ìŒ í˜ì´ì§€)\n- ì¤Œ ì¸/ì•„ì›ƒ ê¸°ëŠ¥ (50% ~ 300%)\n- 90ë„ íšŒì „ ê¸°ëŠ¥\n- í…ìŠ¤íŠ¸ ì„ íƒ ì§€ì› (onTextSelect ì½œë°±)\n- ë¡œë”© ìƒíƒœ ë° ì—ëŸ¬ í•¸ë“¤ë§\n- ë°˜ì‘í˜• ë””ìì¸\n\n**UI/UX íŠ¹ì§•:**\n- Habitus33 ì‚¬ì´ë²„í‘í¬ í…Œë§ˆ ì ìš©\n- ì§ê´€ì ì¸ ì»¨íŠ¸ë¡¤ ë²„íŠ¼\n- ì‹¤ì‹œê°„ í˜ì´ì§€/ì¤Œ ìƒíƒœ í‘œì‹œ\n- í…ìŠ¤íŠ¸ ì„ íƒ ì•ˆë‚´ ë©”ì‹œì§€\n- ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼\n\n**ê¸°ìˆ ì  íŠ¹ì§•:**\n- TypeScript ì™„ì „ ì§€ì›\n- React hooks í™œìš© (useState, useCallback, useRef, useEffect)\n- í…ìŠ¤íŠ¸ ì„ íƒ ì´ë²¤íŠ¸ ì²˜ë¦¬\n- ì¢Œí‘œ ê³„ì‚° ê¸°ëŠ¥ (í•˜ì´ë¼ì´íŠ¸ ì¤€ë¹„)\n- ì—ëŸ¬ ê²½ê³„ ì²˜ë¦¬\n- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€\n</info added on 2025-07-07T03:36:49.893Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 3
          },
          {
            "id": 2,
            "title": "TSReadingPageì— PDF ë·°ì–´ í†µí•©",
            "description": "TSReadingPage ì»´í¬ë„ŒíŠ¸ì— PDF ë·°ì–´ë¥¼ í†µí•©í•˜ì—¬ PDFê°€ ìˆëŠ” ì±…ì˜ ê²½ìš° ì¡°ê±´ë¶€ë¡œ ë Œë”ë§í•©ë‹ˆë‹¤.",
            "details": "- TSReadingPageì—ì„œ ì±…ì˜ PDF íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸\\n- PDFê°€ ìˆëŠ” ê²½ìš° PdfViewer ì»´í¬ë„ŒíŠ¸ ë Œë”ë§\\n- PDF ë¡œë”© ë° ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬\\n- ê¸°ì¡´ TS ì„¸ì…˜ í”Œë¡œìš°ì™€ì˜ í˜¸í™˜ì„± ìœ ì§€\n<info added on 2025-07-07T03:39:14.801Z>\n**êµ¬í˜„ ë‚´ìš©:**\n1. âœ… TSReadingPageì— PDF ë·°ì–´ í†µí•© ì™„ë£Œ\n2. âœ… SessionData íƒ€ì…ì— PDF ì •ë³´ í•„ë“œ ì¶”ê°€ (pdfUrl, pdfFileSize)\n3. âœ… PDF ë·°ì–´ ìƒíƒœ ê´€ë¦¬ ì¶”ê°€ (showPdfViewer, currentPdfPage, pdfError)\n4. âœ… PDF ë·°ì–´ í† ê¸€ ë²„íŠ¼ êµ¬í˜„\n5. âœ… ì¡°ê±´ë¶€ ë Œë”ë§ êµ¬í˜„ (PDF ìˆìŒ/ì—†ìŒ)\n6. âœ… PDF í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ ìë™ ì¼ì‹œì •ì§€ ê¸°ëŠ¥\n7. âœ… PDF ì—ëŸ¬ í•¸ë“¤ë§ ë° ì‚¬ìš©ì ì•ˆë‚´\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- PDFê°€ ìˆëŠ” ì±…: PDF ë·°ì–´ í† ê¸€ ë²„íŠ¼ í‘œì‹œ\n- PDFê°€ ì—†ëŠ” ì±…: ê¸°ì¡´ í˜¸í¡ í…ìŠ¤íŠ¸ ìœ ì§€\n- PDF ë·°ì–´ í‘œì‹œ/ìˆ¨ê¸°ê¸° í† ê¸€ ê¸°ëŠ¥\n- í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ íƒ€ì´ë¨¸ ìë™ ì¼ì‹œì •ì§€\n- PDF ë¡œë”© ì—ëŸ¬ ì‹œ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€\n\n**UI/UX íŠ¹ì§•:**\n- ì‚¬ì´ë²„í‘í¬ í…Œë§ˆ ì¼ê´€ì„± ìœ ì§€\n- ì§ê´€ì ì¸ PDF ë·°ì–´ í† ê¸€ ë²„íŠ¼\n- ë°˜ì‘í˜• ë””ìì¸ (ìµœëŒ€ ë„ˆë¹„ 4xl)\n- ë¶€ë“œëŸ¬ìš´ ìƒíƒœ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜\n\n**ê¸°ìˆ ì  íŠ¹ì§•:**\n- ê¸°ì¡´ TS ì„¸ì…˜ í”Œë¡œìš°ì™€ ì™„ì „ í˜¸í™˜\n- PDF URL ìë™ êµ¬ì„± (API URL + ìƒëŒ€ ê²½ë¡œ)\n- ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì¸ ìƒíƒœ ê´€ë¦¬\n- íƒ€ì… ì•ˆì „ì„± ë³´ì¥\n\n**ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„:**\n- í…ìŠ¤íŠ¸ ì„ íƒ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¤€ë¹„ ì™„ë£Œ\n- ë©”ëª¨ ëª¨ë‹¬ ì—°ë™ ì¤€ë¹„ (Phase 4)\n- í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ ì—°ë™ ì¤€ë¹„\n</info added on 2025-07-07T03:39:14.801Z>",
            "status": "done",
            "dependencies": [
              "3.1"
            ],
            "parentTaskId": 3
          },
          {
            "id": 3,
            "title": "SVG ì˜¤ë²„ë ˆì´ í•˜ì´ë¼ì´íŠ¸ ì‹œìŠ¤í…œ êµ¬í˜„",
            "description": "PDF í…ìŠ¤íŠ¸ ìœ„ì— SVG ì˜¤ë²„ë ˆì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‘¥ê·¼ ëª¨ì„œë¦¬ í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.",
            "details": "- SVG ì˜¤ë²„ë ˆì´ ì»´í¬ë„ŒíŠ¸ ìƒì„±\\n- í…ìŠ¤íŠ¸ ì¢Œí‘œë¥¼ SVG ì¢Œí‘œë¡œ ë³€í™˜\\n- ë‘¥ê·¼ ëª¨ì„œë¦¬ í•˜ì´ë¼ì´íŠ¸ ë Œë”ë§\\n- í•˜ì´ë¼ì´íŠ¸ ìƒíƒœ ê´€ë¦¬\\n- ì—¬ëŸ¬ í•˜ì´ë¼ì´íŠ¸ ì§€ì›\n<info added on 2025-07-07T03:44:04.886Z>\n**êµ¬í˜„ ë‚´ìš©:**\n1. âœ… PDF í•˜ì´ë¼ì´íŠ¸ íƒ€ì… ì •ì˜ ì™„ë£Œ (types/pdf.ts)\n2. âœ… í•˜ì´ë¼ì´íŠ¸ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ êµ¬í˜„ (lib/pdfHighlightUtils.ts)\n3. âœ… SVG ì˜¤ë²„ë ˆì´ í•˜ì´ë¼ì´íŠ¸ ì»´í¬ë„ŒíŠ¸ ìƒì„± (PdfHighlightOverlay.tsx)\n4. âœ… PdfViewerì— í•˜ì´ë¼ì´íŠ¸ ì‹œìŠ¤í…œ í†µí•© ì™„ë£Œ\n5. âœ… í•˜ì´ë¼ì´íŠ¸ ëª¨ë“œ í† ê¸€ ê¸°ëŠ¥ êµ¬í˜„\n6. âœ… ë‘¥ê·¼ ëª¨ì„œë¦¬ í•˜ì´ë¼ì´íŠ¸ ë Œë”ë§ êµ¬í˜„\n7. âœ… ë‹¤ì¤‘ í•˜ì´ë¼ì´íŠ¸ ì§€ì›\n\n**ì£¼ìš” ê¸°ëŠ¥:**\n- **í•˜ì´ë¼ì´íŠ¸ ìƒì„±**: í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ ìë™ í•˜ì´ë¼ì´íŠ¸ ìƒì„±\n- **ë‘¥ê·¼ ëª¨ì„œë¦¬**: SVG rectì— rx/ry ì†ì„±ìœ¼ë¡œ ì„¸ë ¨ëœ ëª¨ì–‘\n- **ë‹¤ì¤‘ ìƒ‰ìƒ ì§€ì›**: 6ê°€ì§€ í•˜ì´ë¼ì´íŠ¸ ìƒ‰ìƒ (yellow, green, blue, purple, pink, orange)\n- **ì¸í„°ë™í‹°ë¸Œ**: í´ë¦­, ë”ë¸”í´ë¦­, ìš°í´ë¦­ ì´ë²¤íŠ¸ ì§€ì›\n- **ì‹œê°ì  í”¼ë“œë°±**: í˜¸ë²„ ì‹œ íˆ¬ëª…ë„ ë³€ê²½ ë° í…Œë‘ë¦¬ í‘œì‹œ\n- **ë©”ëª¨ í‘œì‹œ**: ë©”ëª¨ê°€ ìˆëŠ” í•˜ì´ë¼ì´íŠ¸ì— ì‘ì€ ì› ì•„ì´ì½˜\n\n**ê¸°ìˆ ì  íŠ¹ì§•:**\n- **ì¢Œí‘œ ë³€í™˜**: DOM ì¢Œí‘œ â†’ SVG ì¢Œí‘œ ì •í™•í•œ ë³€í™˜\n- **ì„±ëŠ¥ ìµœì í™”**: MutationObserverë¡œ ì»¨í…Œì´ë„ˆ ë³€ê²½ ê°ì§€\n- **ë°˜ì‘í˜•**: ìŠ¤ì¼€ì¼ ë³€ê²½ ì‹œ í•˜ì´ë¼ì´íŠ¸ í¬ê¸° ìë™ ì¡°ì •\n- **í˜ì´ì§€ë³„ í•„í„°ë§**: í˜„ì¬ í˜ì´ì§€ì˜ í•˜ì´ë¼ì´íŠ¸ë§Œ ë Œë”ë§\n- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬\n\n**UI/UX íŠ¹ì§•:**\n- **í•˜ì´ë¼ì´íŠ¸ ëª¨ë“œ í† ê¸€**: ë…¸ë€ìƒ‰ ì•„ì´ì½˜ìœ¼ë¡œ ì§ê´€ì  í‘œì‹œ\n- **ìƒíƒœë³„ ì•ˆë‚´ ë©”ì‹œì§€**: ì¼ë°˜ ëª¨ë“œì™€ í•˜ì´ë¼ì´íŠ¸ ëª¨ë“œ êµ¬ë¶„\n- **ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜**: í˜¸ë²„ ë° ìƒíƒœ ì „í™˜ íš¨ê³¼\n- **ì ‘ê·¼ì„±**: í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ë° íˆ´íŒ ì§€ì›\n\n**ë‹¤ìŒ ë‹¨ê³„ ì¤€ë¹„:**\n- í•˜ì´ë¼ì´íŠ¸ ìƒì„± ì´ë²¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ\n- ë©”ëª¨ ëª¨ë‹¬ ì—°ë™ ì¤€ë¹„ (Phase 4)\n- TSReadingPage í†µí•© ì¤€ë¹„\n</info added on 2025-07-07T03:44:04.886Z>",
            "status": "done",
            "dependencies": [
              "3.2"
            ],
            "parentTaskId": 3
          }
        ]
      },
      {
        "id": 4,
        "title": "Implement PDF Note-Taking Modal",
        "description": "Implement a reusable PDF note-taking modal with the same UI/UX as the existing review session memo input form. This modal will be triggered upon highlighting text in the PDF viewer, pausing the timer and pre-filling the modal with the highlighted text.",
        "details": "1.  Create a new, reusable component for the PDF note-taking modal, mirroring the UI/UX of the existing review session memo input form.\n2.  Implement logic to pause the timer when text is highlighted in the PDF viewer.\n3.  Implement logic to invoke the PDF note-taking modal upon text highlighting.\n4.  Automatically populate the modal with the highlighted text.\n5.  Implement functionality to save the note and return to the TS reading session upon saving, resuming the timer.\n6. Ensure the modal is properly integrated with the highlighting functionality implemented in Task 3.",
        "testStrategy": "1.  Highlight text in the PDF viewer and verify that the timer pauses.\n2.  Verify that the PDF note-taking modal is invoked upon text highlighting.\n3.  Ensure that the highlighted text is automatically populated in the modal.\n4.  Save the note and verify that the user is returned to the TS reading session and the timer resumes.\n5.  Test the modal with different lengths of highlighted text.\n6.  Verify that the saved note is correctly associated with the highlighted text.",
        "status": "done",
        "dependencies": [
          3
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "ê¸°ì¡´ TS ë¦¬ë·° ë©”ëª¨ UI ë¶„ì„ ë° ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ",
            "description": "TSReviewPageì˜ ë©”ëª¨ ì…ë ¥ í¼ì„ ë¶„ì„í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ì¶”ì¶œ",
            "details": "TSReviewPage.client.tsxì˜ ë©”ëª¨ ì…ë ¥ í¼ UI/UXë¥¼ ë¶„ì„í•˜ì—¬ PDF ë©”ëª¨ ì‘ì„±ì— ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë³„ë„ ì»´í¬ë„ŒíŠ¸ë¡œ ì¶”ì¶œ\n<info added on 2025-07-07T03:51:48.988Z>\nâœ… ì„œë¸ŒíƒœìŠ¤í¬ 4.1 ì™„ë£Œ!\n\n**ì™„ë£Œ ë‚´ìš©:**\n- TSReviewPageì˜ ë©”ëª¨ ì…ë ¥ í¼ UI/UXë¥¼ ë¶„ì„ ì™„ë£Œ\n- ë™ì¼í•œ cyberThemeì™€ ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•˜ëŠ” PdfMemoModal ì»´í¬ë„ŒíŠ¸ ìƒì„±\n- ê¸°ì¡´ TS ë¦¬ë·° í¼ê³¼ ë™ì¼í•œ í•„ë“œë“¤ êµ¬í˜„:\n  - ë©”ëª¨ ì„±ê²© ì„ íƒ (ìƒê°/ì¸ìš©/ì§ˆë¬¸)\n  - ë©”ëª¨ í…ìŠ¤íŠ¸ ì…ë ¥ (í•˜ì´ë¼ì´íŠ¸ëœ í…ìŠ¤íŠ¸ ìë™ ì…ë ¥)\n  - í‚¤ì›Œë“œ ì…ë ¥\n  - ì…€í”„ í‰ê°€ (ë³„ì  1-5)\n- ëª¨ë‹¬ í˜•íƒœë¡œ êµ¬í˜„í•˜ì—¬ PDF ë·°ì–´ ìœ„ì— ì˜¤ë²„ë ˆì´\n- ë°˜ì‘í˜• ë””ìì¸ ë° ì ‘ê·¼ì„± ê³ ë ¤\n- ì—ëŸ¬ í•¸ë“¤ë§ ë° ë¡œë”© ìƒíƒœ ê´€ë¦¬\n- PdfMemoData íƒ€ì… ì •ì˜ ë° export ì¶”ê°€\n</info added on 2025-07-07T03:51:48.988Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 4
          },
          {
            "id": 2,
            "title": "PDF ë©”ëª¨ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„±",
            "description": "í•˜ì´ë¼ì´íŠ¸ëœ í…ìŠ¤íŠ¸ë¥¼ ë°›ì•„ ë©”ëª¨ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ ìƒì„±",
            "details": "ê¸°ì¡´ TS ë¦¬ë·° ë©”ëª¨ UIì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ì˜ PDF ë©”ëª¨ ëª¨ë‹¬ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•˜ê³ , í•˜ì´ë¼ì´íŠ¸ëœ í…ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ì…ë ¥í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„\n<info added on 2025-07-07T03:52:30.188Z>\nPdfMemoModal ì»´í¬ë„ŒíŠ¸ëŠ” ì„œë¸ŒíƒœìŠ¤í¬ 4.1ì—ì„œ ì´ë¯¸ ì™„ì„±ë¨\n- í•˜ì´ë¼ì´íŠ¸ëœ í…ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ë©”ëª¨ í•„ë“œì— ì…ë ¥í•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„\n- ê¸°ì¡´ TS ë¦¬ë·° ë©”ëª¨ì™€ ë™ì¼í•œ UI/UX ìŠ¤íƒ€ì¼ ì ìš©\n- ëª¨ë“  í•„ìˆ˜ ê¸°ëŠ¥ êµ¬í˜„:\n  - ë©”ëª¨ ì„±ê²© ì„ íƒ (ìƒê°/ì¸ìš©/ì§ˆë¬¸)\n  - ë©”ëª¨ í…ìŠ¤íŠ¸ ì…ë ¥ (í•˜ì´ë¼ì´íŠ¸ í…ìŠ¤íŠ¸ ìë™ ì…ë ¥)\n  - í‚¤ì›Œë“œ ì…ë ¥\n  - ì¤‘ìš”ë„ í‰ê°€ (ë³„ì )\n  - ì—ëŸ¬ í•¸ë“¤ë§ ë° ë¡œë”© ìƒíƒœ\n- PdfMemoData íƒ€ì… ì •ì˜ ë° export\n- ëª¨ë‹¬ í˜•íƒœë¡œ êµ¬í˜„í•˜ì—¬ PDF ë·°ì–´ ìœ„ì— ì˜¤ë²„ë ˆì´\n\n**ë‹¤ìŒ ë‹¨ê³„:** TSReadingPageì— ëª¨ë‹¬ì„ í†µí•©í•˜ê³  í•˜ì´ë¼ì´íŠ¸ ì´ë²¤íŠ¸ì™€ ì—°ë™\n</info added on 2025-07-07T03:52:30.188Z>",
            "status": "done",
            "dependencies": [
              "4.1"
            ],
            "parentTaskId": 4
          },
          {
            "id": 3,
            "title": "TSReadingPageì— PDF ë©”ëª¨ ëª¨ë‹¬ í†µí•©",
            "description": "TSReadingPageì— PDF ë©”ëª¨ ëª¨ë‹¬ì„ í†µí•©í•˜ê³  í•˜ì´ë¼ì´íŠ¸ ì´ë²¤íŠ¸ì™€ ì—°ë™",
            "details": "TSReadingPageì— PDF ë©”ëª¨ ëª¨ë‹¬ì„ ì¶”ê°€í•˜ê³ , í•˜ì´ë¼ì´íŠ¸ ìƒì„± ì‹œ íƒ€ì´ë¨¸ ì¼ì‹œì •ì§€ ë° ëª¨ë‹¬ í˜¸ì¶œ ë¡œì§ êµ¬í˜„\n<info added on 2025-07-07T03:54:51.529Z>\n- TSReadingPageì— PdfMemoModal ì»´í¬ë„ŒíŠ¸ import ë° í†µí•© ì™„ë£Œ\n- PDF ë©”ëª¨ ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬ ì¶”ê°€:\n  - isMemoModalOpen: ëª¨ë‹¬ ì—´ë¦¼/ë‹«í˜ ìƒíƒœ\n  - selectedText: í•˜ì´ë¼ì´íŠ¸ëœ í…ìŠ¤íŠ¸\n  - selectedPageNumber: í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸\n- í•˜ì´ë¼ì´íŠ¸ ì´ë²¤íŠ¸ì™€ ëª¨ë‹¬ ì—°ë™ êµ¬í˜„:\n  - handlePdfTextSelectì—ì„œ íƒ€ì´ë¨¸ ìë™ ì¼ì‹œì •ì§€\n  - ì„ íƒëœ í…ìŠ¤íŠ¸ì™€ í˜ì´ì§€ ì •ë³´ ì €ì¥\n  - ë©”ëª¨ ëª¨ë‹¬ ìë™ í˜¸ì¶œ\n- ëª¨ë‹¬ í•¸ë“¤ëŸ¬ êµ¬í˜„:\n  - handleMemoModalClose: ëª¨ë‹¬ ë‹«ê¸° ë° íƒ€ì´ë¨¸ ì¬ê°œ\n  - handleMemoSave: ë©”ëª¨ ì €ì¥ ë¡œì§ (ì„ì‹œë¡œ localStorage ì‚¬ìš©)\n- ë©”ëª¨ ì €ì¥ í›„ íƒ€ì´ë¨¸ ìë™ ì¬ê°œ êµ¬í˜„\n- Phase 5 API ì—°ë™ì„ ìœ„í•œ TODO ì£¼ì„ ì¶”ê°€\n\n**ë‹¤ìŒ ë‹¨ê³„:** íƒ€ì´ë¨¸ ì¼ì‹œì •ì§€/ì¬ê°œ ë¡œì§ ìµœì í™”\n</info added on 2025-07-07T03:54:51.529Z>",
            "status": "done",
            "dependencies": [
              "4.2"
            ],
            "parentTaskId": 4
          },
          {
            "id": 4,
            "title": "íƒ€ì´ë¨¸ ì¼ì‹œì •ì§€/ì¬ê°œ ë¡œì§ êµ¬í˜„",
            "description": "í•˜ì´ë¼ì´íŠ¸ ì‹œ íƒ€ì´ë¨¸ ì¼ì‹œì •ì§€, ë©”ëª¨ ì €ì¥ í›„ íƒ€ì´ë¨¸ ì¬ê°œ ë¡œì§ êµ¬í˜„",
            "details": "PDF í•˜ì´ë¼ì´íŠ¸ ìƒì„± ì‹œ ìë™ìœ¼ë¡œ íƒ€ì´ë¨¸ë¥¼ ì¼ì‹œì •ì§€í•˜ê³ , ë©”ëª¨ ì €ì¥ ì™„ë£Œ í›„ íƒ€ì´ë¨¸ë¥¼ ìë™ìœ¼ë¡œ ì¬ê°œí•˜ëŠ” ë¡œì§ êµ¬í˜„\n<info added on 2025-07-07T03:55:20.886Z>\nğŸ” ì„œë¸ŒíƒœìŠ¤í¬ 4.4 ë¶„ì„ ì‹œì‘\n\n**í˜„ì¬ íƒ€ì´ë¨¸ ë¡œì§ ê²€í† :**\n- ê¸°ë³¸ ì¼ì‹œì •ì§€/ì¬ê°œ ê¸°ëŠ¥ì€ ì´ë¯¸ êµ¬í˜„ë¨\n- PDF í•˜ì´ë¼ì´íŠ¸ ì‹œ ìë™ ì¼ì‹œì •ì§€ êµ¬í˜„ë¨\n- ë©”ëª¨ ì €ì¥ í›„ ìë™ ì¬ê°œ êµ¬í˜„ë¨\n- ëª¨ë‹¬ ë‹«ê¸° ì‹œ ìë™ ì¬ê°œ êµ¬í˜„ë¨\n\n**ì¶”ê°€ ìµœì í™” í•„ìš” ì‚¬í•­:**\n1. ì¤‘ë³µ ì¼ì‹œì •ì§€ ë°©ì§€ ë¡œì§\n2. íƒ€ì´ë¨¸ ìƒíƒœ í‘œì‹œ ê°œì„ \n3. ë©”ëª¨ ì‘ì„± ì¤‘ íƒ€ì´ë¨¸ ìƒíƒœ ëª…í™•í™”\n4. ì—ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬ (ëª¨ë‹¬ ì—´ë¦¼ ì¤‘ ìˆ˜ë™ ì¼ì‹œì •ì§€ ë“±)\n\n**êµ¬í˜„ ì§„í–‰:**\n- í˜„ì¬ ë¡œì§ì´ ì´ë¯¸ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ê³  ìˆìŒì„ í™•ì¸\n- í•„ìš”í•œ ê²½ìš°ì—ë§Œ ìµœì†Œí•œì˜ ê°œì„  ì ìš©\n</info added on 2025-07-07T03:55:20.886Z>\n<info added on 2025-07-07T03:56:34.974Z>\nâœ… ì„œë¸ŒíƒœìŠ¤í¬ 4.4 ì™„ë£Œ!\n\n**ì™„ë£Œëœ íƒ€ì´ë¨¸ ë¡œì§ ìµœì í™”:**\n\n1. **ë©”ëª¨ ì‘ì„± ìƒíƒœ êµ¬ë¶„**:\n   - `isPausedForMemo` ìƒíƒœ ì¶”ê°€ë¡œ ë©”ëª¨ ì‘ì„±ìœ¼ë¡œ ì¸í•œ ì¼ì‹œì •ì§€ì™€ ìˆ˜ë™ ì¼ì‹œì •ì§€ êµ¬ë¶„\n   - íƒ€ì´ë¨¸ ìƒíƒœ í…ìŠ¤íŠ¸ ê°œì„  (ëª°ì…í•˜ëŠ” ì¤‘/ì¼ì‹œì •ì§€ë¨/ë©”ëª¨ ì‘ì„± ì¤‘)\n\n2. **ì¤‘ë³µ ë°©ì§€ ë¡œì§**:\n   - ë©”ëª¨ ëª¨ë‹¬ì´ ì´ë¯¸ ì—´ë ¤ìˆì„ ë•Œ í…ìŠ¤íŠ¸ ì„ íƒ ë¬´ì‹œ\n   - ì´ë¯¸ ì¼ì‹œì •ì§€ëœ ìƒíƒœì—ì„œ ì¤‘ë³µ ì¼ì‹œì •ì§€ ë°©ì§€\n\n3. **ìˆ˜ë™ ì»¨íŠ¸ë¡¤ ì œí•œ**:\n   - ë©”ëª¨ ì‘ì„± ì¤‘ì—ëŠ” ìˆ˜ë™ ì¼ì‹œì •ì§€/ì¬ê°œ ë²„íŠ¼ ë¹„í™œì„±í™”\n   - ë©”ëª¨ ì‘ì„± ì¤‘ì—ëŠ” ìˆ˜ë™ ì¢…ë£Œ ë²„íŠ¼ ë¹„í™œì„±í™”\n   - ë²„íŠ¼ ìƒíƒœì— ë”°ë¥¸ ì‹œê°ì  í”¼ë“œë°± ê°œì„ \n\n4. **ì •í™•í•œ íƒ€ì´ë¨¸ ì¬ê°œ**:\n   - ë©”ëª¨ ì €ì¥ ì™„ë£Œ ì‹œì—ë§Œ íƒ€ì´ë¨¸ ì¬ê°œ\n   - ëª¨ë‹¬ ë‹«ê¸° ì‹œì—ë„ ì •í™•í•œ íƒ€ì´ë¨¸ ì¬ê°œ\n   - ë©”ëª¨ ì‘ì„±ìœ¼ë¡œ ì¸í•œ ì¼ì‹œì •ì§€ì¸ ê²½ìš°ì—ë§Œ ìë™ ì¬ê°œ\n\n**ì‚¬ìš©ì ê²½í—˜ ê°œì„ :**\n- íƒ€ì´ë¨¸ ìƒíƒœê°€ ëª…í™•í•˜ê²Œ í‘œì‹œë¨\n- ë©”ëª¨ ì‘ì„± ì¤‘ ì‹¤ìˆ˜ë¡œ íƒ€ì´ë¨¸ ì¡°ì‘ ë°©ì§€\n- ì¼ê´€ëœ íƒ€ì´ë¨¸ ë™ì‘ ë³´ì¥\n</info added on 2025-07-07T03:56:34.974Z>",
            "status": "done",
            "dependencies": [
              "4.3"
            ],
            "parentTaskId": 4
          }
        ]
      },
      {
        "id": 5,
        "title": "Implement PDF Memo Saving API",
        "description": "Develop a dedicated API endpoint to save PDF memos generated during TS reading sessions to the database. This API will handle data persistence for PDF notes.",
        "details": "1. Create a new API endpoint `/api/ts-notes` that accepts POST requests.\n2. Implement server-side validation to ensure the request body contains `bookId` (integer), `pageNumber` (integer), `highlightedText` (string), `memoContent` (string), and `memoType` (string).\n3. Create a `Note` model in the database with fields corresponding to the validated request body parameters.\n4. Upon successful validation, create a new record in the `Note` table with the provided data.\n5. Return a success response with the newly created note's ID.\n6. Implement error handling to return appropriate error codes and messages for invalid requests or database errors.\n7. Ensure the API is secured with appropriate authentication and authorization mechanisms.\n8. Optimize database queries for performance, especially when retrieving notes for a specific book and page.",
        "testStrategy": "1. Send a POST request to `/api/ts-notes` with valid data for `bookId`, `pageNumber`, `highlightedText`, `memoContent`, and `memoType`.\n2. Verify that a new record is created in the `Note` table with the provided data.\n3. Verify that the API returns a success response with the newly created note's ID.\n4. Send a POST request with invalid data (e.g., missing fields, incorrect data types) and verify that the API returns an appropriate error response.\n5. Test the API with different combinations of `bookId`, `pageNumber`, `highlightedText`, `memoContent`, and `memoType` to ensure it handles various scenarios correctly.\n6. Test the API's performance by sending multiple concurrent requests and monitoring response times.\n7. Verify that the API is properly secured by attempting to access it without proper authentication and authorization.",
        "status": "done",
        "dependencies": [
          3,
          4
        ],
        "priority": "high",
        "subtasks": [
          {
            "id": 1,
            "title": "ê¸°ì¡´ Note ëª¨ë¸ ë° API êµ¬ì¡° ë¶„ì„",
            "description": "ê¸°ì¡´ Note ëª¨ë¸ì˜ ìŠ¤í‚¤ë§ˆì™€ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë¶„ì„í•˜ì—¬ PDF ë©”ëª¨ì™€ í˜¸í™˜ ê°€ëŠ¥í•œ êµ¬ì¡° íŒŒì•…",
            "details": "1. Note ëª¨ë¸ ìŠ¤í‚¤ë§ˆ ë¶„ì„ (í•„ë“œ, íƒ€ì…, ì œì•½ì¡°ê±´)\\n2. notes API ì—”ë“œí¬ì¸íŠ¸ ë¶„ì„ (/notes ë¼ìš°íŠ¸)\\n3. PDF ë©”ëª¨ë¥¼ ìœ„í•œ ì¶”ê°€ í•„ë“œ í•„ìš”ì„± ê²€í† \\n4. ê¸°ì¡´ TS ë©”ëª¨ì™€ PDF ë©”ëª¨ êµ¬ë¶„ ë°©ë²• ì„¤ê³„\n<info added on 2025-07-07T04:00:32.568Z>\nâœ… ê¸°ì¡´ Note ëª¨ë¸ ë° API êµ¬ì¡° ë¶„ì„ ì™„ë£Œ\n\n**Note ëª¨ë¸ ë¶„ì„ ê²°ê³¼:**\n1. **ê¸°ì¡´ í•„ë“œë“¤:**\n   - í•„ìˆ˜: userId, bookId, type ('quote'|'thought'|'question'), content\n   - ì˜µì…”ë„: tags[], originSession, importanceReason, momentContext, relatedKnowledge, mentalImage, relatedLinks[], inlineThreads[]\n   - ì‹œê°„: createdAt, clientCreatedAt\n\n2. **PDF ë©”ëª¨ë¥¼ ìœ„í•´ ì¶”ê°€ í•„ìš”í•œ í•„ë“œë“¤:**\n   - pageNumber: PDF í˜ì´ì§€ ë²ˆí˜¸ (number)\n   - highlightedText: í•˜ì´ë¼ì´íŠ¸ëœ ì›ë¬¸ í…ìŠ¤íŠ¸ (string)\n   - highlightData: í•˜ì´ë¼ì´íŠ¸ ì¢Œí‘œ ì •ë³´ (object, ì˜µì…”ë„)\n   - isPdfMemo: PDF ë©”ëª¨ êµ¬ë¶„ í”Œë˜ê·¸ (boolean, ê¸°ë³¸ê°’ false)\n\n3. **ê¸°ì¡´ API ì—”ë“œí¬ì¸íŠ¸:**\n   - GET /notes - ì „ì²´ ë…¸íŠ¸ ëª©ë¡\n   - POST /notes - ìƒˆ ë…¸íŠ¸ ìƒì„± (ê¸°ì¡´ TS ë©”ëª¨ìš©)\n   - GET /notes/book/:bookId - ì±…ë³„ ë…¸íŠ¸ ì¡°íšŒ\n   - PUT /notes/:noteId - ë…¸íŠ¸ ìˆ˜ì •\n   - DELETE /notes/:noteId - ë…¸íŠ¸ ì‚­ì œ\n\n4. **PDF ë©”ëª¨ ì „ìš© API ì„¤ê³„:**\n   - POST /notes/pdf - PDF ë©”ëª¨ ì „ìš© ìƒì„± ì—”ë“œí¬ì¸íŠ¸\n   - ê¸°ì¡´ createNoteì™€ ë¶„ë¦¬í•˜ì—¬ PDF ì „ìš© validation ì ìš©\n   - ê¸°ì¡´ APIë“¤ê³¼ í˜¸í™˜ì„± ìœ ì§€\n\n**ë‹¤ìŒ ë‹¨ê³„:** Note ëª¨ë¸ì— PDF ê´€ë ¨ í•„ë“œ ì¶”ê°€ ì¤€ë¹„ ì™„ë£Œ\n</info added on 2025-07-07T04:00:32.568Z>",
            "status": "done",
            "dependencies": [],
            "parentTaskId": 5
          },
          {
            "id": 2,
            "title": "Note ëª¨ë¸ì— PDF ê´€ë ¨ í•„ë“œ ì¶”ê°€",
            "description": "PDF ë©”ëª¨ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ì¶”ê°€ í•„ë“œë¥¼ Note ëª¨ë¸ì— ì¶”ê°€ (pageNumber, highlightedText, pdfUrl ë“±)",
            "details": "1. INote ì¸í„°í˜ì´ìŠ¤ì— PDF ê´€ë ¨ í•„ë“œ ì¶”ê°€\\n2. NoteSchemaì— ìƒˆ í•„ë“œë“¤ì˜ Mongoose ìŠ¤í‚¤ë§ˆ ì •ì˜\\n3. ê¸°ì¡´ ë°ì´í„°ì™€ì˜ í˜¸í™˜ì„± ìœ ì§€ (ì˜µì…”ë„ í•„ë“œ)\\n4. ì¸ë±ìŠ¤ ì¶”ê°€ (ì„±ëŠ¥ ìµœì í™”)\n<info added on 2025-07-07T04:01:41.967Z>\nâœ… Note ëª¨ë¸ì— PDF ê´€ë ¨ í•„ë“œ ì¶”ê°€ ì™„ë£Œ\n\n**ì¶”ê°€ëœ í•„ë“œë“¤:**\n\n1. **INote ì¸í„°í˜ì´ìŠ¤ í™•ì¥:**\n   - `isPdfMemo?: boolean` - PDF ë©”ëª¨ êµ¬ë¶„ í”Œë˜ê·¸\n   - `pageNumber?: number` - PDF í˜ì´ì§€ ë²ˆí˜¸\n   - `highlightedText?: string` - í•˜ì´ë¼ì´íŠ¸ëœ ì›ë¬¸ í…ìŠ¤íŠ¸\n   - `highlightData?: object` - í•˜ì´ë¼ì´íŠ¸ ì¢Œí‘œ ì •ë³´ (x, y, width, height, pageIndex)\n\n2. **NoteSchema í™•ì¥:**\n   - ëª¨ë“  ìƒˆ í•„ë“œë¥¼ ì˜µì…”ë„ë¡œ ì„¤ì •í•˜ì—¬ ê¸°ì¡´ ë°ì´í„°ì™€ í˜¸í™˜ì„± ìœ ì§€\n   - `isPdfMemo`: Boolean, ê¸°ë³¸ê°’ false\n   - `pageNumber`: Number, ìµœì†Œê°’ 1, ê¸°ë³¸ê°’ null\n   - `highlightedText`: String, ìµœëŒ€ 2000ì (PDF í…ìŠ¤íŠ¸ëŠ” ë” ê¸¸ ìˆ˜ ìˆìŒ)\n   - `highlightData`: ì¤‘ì²© ê°ì²´ë¡œ ì¢Œí‘œ ì •ë³´ ì €ì¥, ëª¨ë“  í•˜ìœ„ í•„ë“œ required\n\n3. **ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤ ì¶”ê°€:**\n   - `{ userId: 1, bookId: 1, isPdfMemo: 1 }` - PDF ë©”ëª¨ í•„í„°ë§ìš©\n   - `{ userId: 1, bookId: 1, pageNumber: 1 }` - í˜ì´ì§€ë³„ ë©”ëª¨ ì¡°íšŒìš©\n   - `{ isPdfMemo: 1, pageNumber: 1 }` - PDF ë©”ëª¨ í˜ì´ì§€ ê²€ìƒ‰ìš©\n\n**ë‹¤ìŒ ë‹¨ê³„:** PDF ë©”ëª¨ ì €ì¥ API ì»¨íŠ¸ë¡¤ëŸ¬ í•¨ìˆ˜ êµ¬í˜„ ì¤€ë¹„ ì™„ë£Œ\n</info added on 2025-07-07T04:01:41.967Z>",
            "status": "done",
            "dependencies": [
              "5.1"
            ],
            "parentTaskId": 5
          },
          {
            "id": 3,
            "title": "PDF ë©”ëª¨ ì €ì¥ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„",
            "description": "PDF ë©”ëª¨ë¥¼ ì €ì¥í•˜ëŠ” ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ notes ì»¨íŠ¸ë¡¤ëŸ¬ì— êµ¬í˜„",
            "details": "1. noteControllerì— createPdfNote í•¨ìˆ˜ êµ¬í˜„\\n2. ìš”ì²­ ë°ì´í„° ê²€ì¦ (bookId, pageNumber, highlightedText, memoData)\\n3. ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ í™•ì¸\\n4. PDF ë©”ëª¨ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥\\n5. ì—ëŸ¬ í•¸ë“¤ë§ ë° ì‘ë‹µ ì²˜ë¦¬\n<info added on 2025-07-07T04:03:01.065Z>\nâœ… PDF ë©”ëª¨ ì €ì¥ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ ì™„ë£Œ\n\n**êµ¬í˜„ëœ createPdfNote í•¨ìˆ˜ ê¸°ëŠ¥:**\n\n1. **ì¸ì¦ ë° ê¶Œí•œ ê²€ì¦:**\n   - ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ í™•ì¸\n   - ì±… ì†Œìœ ê¶Œ í™•ì¸ (userIdì™€ bookId ë§¤ì¹­)\n   - PDF íŒŒì¼ ë“±ë¡ ì—¬ë¶€ í™•ì¸ (book.pdfUrl ì¡´ì¬ í™•ì¸)\n\n2. **ìš”ì²­ ë°ì´í„° ì²˜ë¦¬:**\n   - bookId, type, content, tags (ê¸°ë³¸ ë©”ëª¨ í•„ë“œ)\n   - pageNumber, highlightedText, highlightData (PDF ì „ìš© í•„ë“œ)\n   - selfRating (ë³„ì  í‰ê°€)\n   - isPdfMemo: true ìë™ ì„¤ì •\n\n3. **ì—ëŸ¬ í•¸ë“¤ë§:**\n   - MongoDB ValidationError ì²˜ë¦¬ (í•„ë“œ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨)\n   - MongoDB CastError ì²˜ë¦¬ (ì˜ëª»ëœ ObjectId í˜•ì‹)\n   - ì¼ë°˜ì ì¸ ì„œë²„ ì—ëŸ¬ ì²˜ë¦¬\n   - ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€ ì œê³µ\n\n4. **ê°œë°œ í™˜ê²½ ë¡œê¹…:**\n   - PDF ë©”ëª¨ ìƒì„± ì„±ê³µ ì‹œ ìƒì„¸ ì •ë³´ ë¡œê¹…\n   - ë””ë²„ê¹… ë° ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ ë©”íƒ€ë°ì´í„° í¬í•¨\n\n5. **Note ëª¨ë¸ ì—…ë°ì´íŠ¸:**\n   - selfRating í•„ë“œ ì¶”ê°€ (1-5 ë²”ìœ„, ì˜µì…”ë„)\n   - PDF ë©”ëª¨ ì‘ì„± ì‹œ ë³„ì  í‰ê°€ ì €ì¥ ì§€ì›\n\n**ë‹¤ìŒ ë‹¨ê³„:** notes ë¼ìš°íŠ¸ì— PDF ë©”ëª¨ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ì¤€ë¹„ ì™„ë£Œ\n</info added on 2025-07-07T04:03:01.065Z>",
            "status": "done",
            "dependencies": [
              "5.2"
            ],
            "parentTaskId": 5
          },
          {
            "id": 4,
            "title": "notes ë¼ìš°íŠ¸ì— PDF ë©”ëª¨ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€",
            "description": "notes.ts ë¼ìš°í„°ì— PDF ë©”ëª¨ ì €ì¥ì„ ìœ„í•œ ìƒˆë¡œìš´ ë¼ìš°íŠ¸ì™€ validation ì¶”ê°€",
            "details": "1. POST /notes/pdf ë¼ìš°íŠ¸ ì¶”ê°€\\n2. PDF ë©”ëª¨ ì „ìš© validation ë¯¸ë“¤ì›¨ì–´ êµ¬ì„±\\n3. express-validatorë¥¼ ì‚¬ìš©í•œ ìš”ì²­ ë°ì´í„° ê²€ì¦\\n4. ë¼ìš°íŠ¸ë¥¼ createPdfNote ì»¨íŠ¸ë¡¤ëŸ¬ í•¨ìˆ˜ì— ì—°ê²°\n<info added on 2025-07-07T04:04:06.160Z>\nâœ… notes ë¼ìš°íŠ¸ì— PDF ë©”ëª¨ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ì™„ë£Œ\n\n**êµ¬í˜„ëœ ë‚´ìš©:**\n\n1. **createPdfNote í•¨ìˆ˜ import ì¶”ê°€:**\n   - noteControllerì—ì„œ createPdfNote í•¨ìˆ˜ë¥¼ import\n   - ê¸°ì¡´ import ëª©ë¡ì— ì¶”ê°€\n\n2. **PDF ë©”ëª¨ ì „ìš© validation ë¯¸ë“¤ì›¨ì–´ êµ¬ì„±:**\n   - `createPdfNoteValidation` ë°°ì—´ ìƒì„±\n   - í•„ìˆ˜ í•„ë“œ ê²€ì¦: bookId, type, content, pageNumber, highlightedText\n   - ì˜µì…”ë„ í•„ë“œ ê²€ì¦: tags, selfRating, highlightData\n   - ìƒì„¸í•œ íƒ€ì… ë° ë²”ìœ„ ê²€ì¦ (MongoId, ì •ìˆ˜, ë¬¸ìì—´ ê¸¸ì´ ë“±)\n\n3. **POST /notes/pdf ë¼ìš°íŠ¸ ì¶”ê°€:**\n   - PDF ë©”ëª¨ ì „ìš© ì—”ë“œí¬ì¸íŠ¸ ìƒì„±\n   - validation â†’ validateRequest â†’ createPdfNote ìˆœì„œë¡œ ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ êµ¬ì„±\n   - ê¸°ì¡´ POST /notesì™€ ë¶„ë¦¬í•˜ì—¬ PDF ì „ìš© ë¡œì§ ì ìš©\n\n4. **ìƒì„¸í•œ validation ê·œì¹™:**\n   - bookId: MongoDB ObjectId í˜•ì‹ ê²€ì¦\n   - pageNumber: 1 ì´ìƒì˜ ì •ìˆ˜\n   - highlightedText: ìµœëŒ€ 2000ì (PDF í…ìŠ¤íŠ¸ëŠ” ë” ê¸¸ ìˆ˜ ìˆìŒ)\n   - selfRating: 1-5 ë²”ìœ„ì˜ ì •ìˆ˜\n   - highlightData: ì¢Œí‘œ ì •ë³´ ê°ì²´ (x, y, width, height, pageIndex)\n\n**API ì—”ë“œí¬ì¸íŠ¸ ì™„ì„±:** `POST /api/notes/pdf`ë¡œ PDF ë©”ëª¨ ì €ì¥ ê°€ëŠ¥\n\n**ë‹¤ìŒ ë‹¨ê³„:** í”„ë¡ íŠ¸ì—”ë“œ API ì—°ë™ êµ¬í˜„ ì¤€ë¹„ ì™„ë£Œ\n</info added on 2025-07-07T04:04:06.160Z>",
            "status": "done",
            "dependencies": [
              "5.3"
            ],
            "parentTaskId": 5
          },
          {
            "id": 5,
            "title": "í”„ë¡ íŠ¸ì—”ë“œ API ì—°ë™ êµ¬í˜„",
            "description": "PdfMemoModalì—ì„œ localStorage ëŒ€ì‹  ì‹¤ì œ APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì •í•˜ê³  ì—ëŸ¬ í•¸ë“¤ë§ ì¶”ê°€",
            "details": "1. lib/api.tsì— PDF ë©”ëª¨ ì €ì¥ API í•¨ìˆ˜ ì¶”ê°€\\n2. PdfMemoModalì˜ handleSave í•¨ìˆ˜ ìˆ˜ì •\\n3. API í˜¸ì¶œ ì—ëŸ¬ í•¸ë“¤ë§ ë° ì‚¬ìš©ì í”¼ë“œë°±\\n4. ì„±ê³µ/ì‹¤íŒ¨ ìƒíƒœ UI ì—…ë°ì´íŠ¸\\n5. TSReadingPageì—ì„œ ë©”ëª¨ ì €ì¥ ì™„ë£Œ í›„ ì²˜ë¦¬ ë¡œì§\n<info added on 2025-07-07T04:06:58.305Z>\nâœ… í”„ë¡ íŠ¸ì—”ë“œ API ì—°ë™ êµ¬í˜„ ì™„ë£Œ\n\n**êµ¬í˜„ëœ ë‚´ìš©:**\n\n1. **lib/api.tsì— PDF ë©”ëª¨ ì €ì¥ API í•¨ìˆ˜ ì¶”ê°€:**\n   - `notes.createPdf(pdfNoteData)` í•¨ìˆ˜ êµ¬í˜„\n   - POST /notes/pdf ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œ\n   - ê¸°ì¡´ notes APIì™€ ì¼ê´€ëœ êµ¬ì¡° ìœ ì§€\n\n2. **PdfMemoModal ëŒ€í­ ìˆ˜ì •:**\n   - localStorage ì œê±°í•˜ê³  ì‹¤ì œ API í˜¸ì¶œë¡œ ë³€ê²½\n   - notes.createPdf API ì—°ë™\n   - ìƒì„¸í•œ ì—ëŸ¬ í•¸ë“¤ë§ (validation ì—ëŸ¬, ì„œë²„ ì—ëŸ¬ ë“±)\n   - ë¡œë”© ìƒíƒœ UI ì¶”ê°€ (ìŠ¤í”¼ë„ˆ, ë²„íŠ¼ ë¹„í™œì„±í™”)\n   - ì‚¬ìš©ì ì¹œí™”ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ\n\n3. **API ìš”ì²­ ë°ì´í„° êµ¬ì¡°:**\n   - bookId, type, content, tags (ê¸°ë³¸ ë©”ëª¨ í•„ë“œ)\n   - pageNumber, highlightedText (PDF ì „ìš© í•„ë“œ)\n   - selfRating (ë³„ì  í‰ê°€)\n   - highlightData (í–¥í›„ í•˜ì´ë¼ì´íŠ¸ ì¢Œí‘œ ì •ë³´ í™•ì¥ ê°€ëŠ¥)\n\n4. **ì—ëŸ¬ í•¸ë“¤ë§ ê°œì„ :**\n   - API ì‘ë‹µ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ\n   - validation ì—ëŸ¬ ë°°ì—´ ì²˜ë¦¬\n   - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë“± ì¼ë°˜ì ì¸ ì—ëŸ¬ ì²˜ë¦¬\n   - ì‚¬ìš©ìì—ê²Œ ëª…í™•í•œ í”¼ë“œë°± ì œê³µ\n\n5. **TSReadingPage ì—°ë™ ìˆ˜ì •:**\n   - handleMemoSave í•¨ìˆ˜ ê°„ì†Œí™” (API í˜¸ì¶œì€ ëª¨ë‹¬ì—ì„œ ì²˜ë¦¬)\n   - props ì¸í„°í˜ì´ìŠ¤ ë³€ê²½ì— ë§ê²Œ ìˆ˜ì • (selectedText, bookId)\n   - null ì²´í¬ ì¶”ê°€ë¡œ íƒ€ì… ì•ˆì „ì„± í–¥ìƒ\n\n**API ì—°ë™ ì™„ë£Œ:** PDF ë©”ëª¨ê°€ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë˜ê³  ë°±ì—”ë“œ APIì™€ ì™„ì „íˆ ì—°ë™ë¨\n\n**Phase 5 ì™„ë£Œ:** PDF ë©”ëª¨ ì €ì¥ ì‹œìŠ¤í…œ ì „ì²´ êµ¬í˜„ ì™„ë£Œ! ğŸ‰\n</info added on 2025-07-07T04:06:58.305Z>",
            "status": "done",
            "dependencies": [
              "5.4"
            ],
            "parentTaskId": 5
          }
        ]
      }
    ],
    "metadata": {
      "created": "2025-07-07T03:10:48.522Z",
      "updated": "2025-07-07T04:07:15.819Z",
      "description": "PDF ê¸°ë°˜ ë™ì  ì§€ì‹ ìº¡ì²˜ ì‹œìŠ¤í…œ êµ¬í˜„ì„ ìœ„í•œ íƒœìŠ¤í¬ ê´€ë¦¬"
    }
  },
  "pdf-scroll-feature": {
    "tasks": [
      {
        "id": 1,
        "title": "Project Setup and Dependency Installation",
        "description": "Set up the React/Next.js project environment with Tailwind CSS, ensuring compatibility with existing TSNoteCard component and react-pdf library.",
        "details": "1.  Verify Node.js and npm are installed (>=18.x and >=8.x respectively).\n2.  Initialize a new Next.js project or navigate to the existing project directory.\n3.  Install Tailwind CSS and its dependencies: `npm install -D tailwindcss postcss autoprefixer`\n4.  Configure Tailwind CSS by running `npx tailwindcss init -p` and updating `tailwind.config.js` with necessary configurations.\n5.  Install `react-pdf` library: `npm install react-pdf`\n6.  Verify that the TSNoteCard component is correctly set up and styled.\n7.  Address any compatibility issues between Tailwind CSS and existing styles.\n8.  Create necessary folders and files for components and utilities.",
        "testStrategy": "1.  Run the development server (`npm run dev`) and ensure the application compiles without errors.\n2.  Verify that Tailwind CSS styles are applied correctly.\n3.  Check that the TSNoteCard component renders as expected.\n4.  Ensure `react-pdf` is installed correctly and can be imported.",
        "priority": "high",
        "dependencies": [],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 2,
        "title": "Implement View Mode State Management",
        "description": "Implement the view mode state management using React's useState hook, including the 'grid' and 'more' modes.",
        "details": "1.  In the main dashboard component, declare a state variable `viewMode` using `useState('grid')`.\n2.  Create a function `setViewMode` to update the `viewMode` state.\n3.  Pass the `viewMode` state and `setViewMode` function to the relevant components.\n4.  Implement logic to switch between 'grid' and 'more' modes based on user interaction (e.g., button click).\n5.  Ensure the initial state is set to 'grid'.",
        "testStrategy": "1.  Verify that the `viewMode` state is initialized correctly.\n2.  Test the functionality to switch between 'grid' and 'more' modes.\n3.  Ensure that the UI updates correctly when the `viewMode` changes.\n4.  Check for any unexpected side effects when updating the state.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 3,
        "title": "Implement Memo Card Loading and 'ë”ë³´ê¸°' Functionality",
        "description": "Modify the dashboard to initially load only the recent 3 memo cards in 'grid' mode and implement the 'ë”ë³´ê¸°' (more) button functionality to load all memo cards.",
        "details": "1.  Fetch the initial 3 memo cards and store them in a state variable `recentMemos`.\n2.  Display `recentMemos` in a 3-column grid layout when `viewMode` is 'grid'.\n3.  Implement an API call to fetch all memo cards when the 'ë”ë³´ê¸°' button is clicked.\n4.  Store all memo cards in a state variable `allMemos`.\n5.  Update the UI to display `allMemos` in a 6-column grid layout when `viewMode` is 'more'.\n6.  Implement error handling for the API call.",
        "testStrategy": "1.  Verify that only 3 memo cards are loaded initially in 'grid' mode.\n2.  Test the 'ë”ë³´ê¸°' button to ensure all memo cards are loaded and displayed in 'more' mode.\n3.  Check for correct grid layout in both 'grid' and 'more' modes.\n4.  Test error handling for API call failures.",
        "priority": "high",
        "dependencies": [
          2
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 4,
        "title": "Implement UI Components for Grid and More Views",
        "description": "Implement the UI components for both Grid and More views, ensuring the correct layout and styling.",
        "details": "1.  Create a `GridView` component to display memo cards in a 3-column grid layout.\n2.  Create a `MoreView` component to display memo cards in a 6-column grid layout.\n3.  Use Tailwind CSS to style the components, ensuring responsiveness.\n4.  Implement smaller card sizes in `MoreView`.\n5.  Ensure the `TSNoteCard` component is reused in both views.",
        "testStrategy": "1.  Verify that the `GridView` component displays memo cards in a 3-column grid.\n2.  Verify that the `MoreView` component displays memo cards in a 6-column grid.\n3.  Check for correct styling and responsiveness in both views.\n4.  Ensure that the `TSNoteCard` component is rendered correctly in both views.",
        "priority": "medium",
        "dependencies": [
          3
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 5,
        "title": "Implement Hover Animation",
        "description": "Add hover animation to the memo cards in the 'more' view using Tailwind CSS.",
        "details": "1.  Add the `hover:scale-110` class to the `TSNoteCard` component in the `MoreView`.\n2.  Add the `transition-all duration-300 ease-out` class to the `TSNoteCard` component to ensure a smooth animation.\n3.  Test the hover animation to ensure it scales the card up smoothly.",
        "testStrategy": "1.  Verify that the memo cards scale up on hover in the `MoreView`.\n2.  Check that the animation is smooth and lasts for 300ms.\n3.  Ensure that the animation does not cause any layout shifts.",
        "priority": "medium",
        "dependencies": [
          4
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": 6,
        "title": "Implement Continuous Vertical Scrolling in PDF Viewer",
        "description": "Modify PdfViewer.tsx to enable continuous vertical scrolling, stacking all pages vertically.",
        "details": "1.  Modify the `PdfViewer.tsx` component to render all pages of the PDF in a vertical stack.\n2.  Remove the existing page navigation buttons.\n3.  Adjust the container height and styles to accommodate the continuous scroll.\n4.  Ensure the existing props interface is maintained.\n<info added on 2025-07-07T08:51:57.910Z>\nAnalysis of PdfViewer.tsx complete:\n\nCurrent Structure:\n- Renders a single Page component (based on state.pageNumber)\n- Page navigation via changePage function\n- Highlight overlay processes only the current page (using pageNumber prop)\n\nPlanned Changes:\n1. Render all pages from within Document using Array.from\n2. Stack each page vertically (using flex-col)\n3. Remove page navigation buttons\n4. Change scroll container height to auto to expand to content\n\nImplementation started.\n</info added on 2025-07-07T08:51:57.910Z>\n<info added on 2025-07-07T08:54:18.788Z>\nContinuous vertical scrolling implemented:\n\nâœ… Completed tasks:\n1. Stacked all pages vertically (using Array.from)\n2. Removed page navigation buttons\n3. Tracked current page with IntersectionObserver\n4. Implemented lazy loading for performance optimization (rendering only visible pages)\n5. Adjusted container height to 80vh for more space\n6. Modified highlight overlay to work on all pages\n7. Updated user guidance messages\n\nğŸ”§ Key changes:\n- Managed visible pages with visiblePages Set\n- Tracked each page's DOM element with pageRefs array\n- Detected scroll-based pages with IntersectionObserver\n- Displayed placeholder UI for unloaded pages\n\nNext steps: Testing and performance optimization (Task #7)\n</info added on 2025-07-07T08:54:18.788Z>",
        "testStrategy": "1.  Verify that all pages are rendered in a vertical stack.\n2.  Check that the page navigation buttons are removed.\n3.  Ensure the container height and styles are adjusted correctly.\n4.  Test that the existing props interface is maintained.",
        "priority": "high",
        "dependencies": [
          1
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 7,
        "title": "Implement Lazy Loading with IntersectionObserver",
        "description": "Implement lazy loading using IntersectionObserver to optimize performance for large PDFs.",
        "details": "1.  Use `IntersectionObserver` to detect when a page enters the viewport.\n2.  Only render pages that are currently in or near the viewport.\n3.  Implement a placeholder for pages that are not yet rendered.\n4.  Optimize memory usage by unloading pages that are far from the viewport.\n<info added on 2025-07-07T08:54:46.741Z>\nImplemented basic IntersectionObserver and lazy loading in task 6.\n\nCurrent implementation:\nâœ… Detect page visibility with IntersectionObserver\nâœ… Render only visible pages with visiblePages Set\nâœ… Display unloaded pages with placeholder UI\n\nAdditional optimizations required:\n1. Optimize pre-loading range by adjusting rootMargin\n2. Tune threshold value\n3. Monitor and optimize memory usage\n4. Test with large PDFs\n\nStart performance optimization tasks.\n</info added on 2025-07-07T08:54:46.741Z>\n<info added on 2025-07-07T08:55:57.291Z>\nPerformance optimization complete:\n\nâœ… Implemented optimizations:\n1. Expanded pre-loading range by setting rootMargin to 200px\n2. Finely tuned threshold values: [0, 0.1, 0.25, 0.5, 0.75, 0.9]\n3. Added preloadRange logic to pre-load 2 pages before and after the current page\n4. Added performance monitoring logging in the development environment\n5. Accurately adjusted placeholder size to the actual PDF page size (595x842pt)\n6. Improved loading status and guidance messages in the placeholder\n\nğŸš€ Performance improvement effects:\n- Smooth scrolling experience (pre-loading)\n- Memory efficiency (rendering only necessary pages)\n- Visual consistency (accurate placeholder size)\n- Developer-friendly monitoring\n\nTask 7 complete, moving to Task 8\n</info added on 2025-07-07T08:55:57.291Z>",
        "testStrategy": "1.  Verify that only pages in or near the viewport are rendered.\n2.  Check that placeholders are displayed for pages that are not yet rendered.\n3.  Monitor memory usage to ensure it is optimized.\n4.  Test scrolling performance with large PDFs (100+ pages).",
        "priority": "high",
        "dependencies": [
          6
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": 8,
        "title": "Implement Scroll-Based Page Tracking and Control Bar Synchronization",
        "description": "Implement scroll-based page tracking and synchronize it with the control bar, ensuring compatibility with existing highlight and text selection features.",
        "details": "1.  Use the `IntersectionObserver` to track the currently visible page based on scroll position.\n2.  Update the control bar to reflect the current page number.\n3.  Ensure that the highlight overlay and text selection features continue to function correctly.\n4.  Maintain compatibility with existing zoom and rotation features.\n<info added on 2025-07-07T08:56:27.295Z>\nScroll-based page tracking and synchronization status check:\n\nâœ… Implemented features:\n1. Automatic tracking of the current page based on scroll position using IntersectionObserver.\n2. Real-time synchronization of page information in the top control bar.\n3. Synchronization with external components via the onPageChange callback.\n4. Highlight overlay works on all pages.\n\nTo be checked and improved:\n1. Verify that the text selection function works correctly on all pages.\n2. Verify that the correct page number is passed when creating highlights.\n3. Verify that highlight display is accurate when switching pages.\n\nStart compatibility testing and improvements.\n</info added on 2025-07-07T08:56:27.295Z>\n<info added on 2025-07-07T08:57:59.724Z>\nScroll-based page tracking and compatibility improvements complete:\n\nâœ… Completed improvements:\n1. Improved logic for accurate page number detection during text selection\n   - Accurately locate the page container containing the selected text through DOM traversal\n   - Accurate page number transfer via data-page-number attribute\n\n2. Added developer-friendly debugging features\n   - Detailed logging of page tracking status\n   - Logging when zoom changes\n   - Display list of visible pages\n\n3. Added keyboard shortcut support\n   - +/- : Zoom in/out\n   - R : Rotate 90 degrees\n   - H : Toggle highlight mode\n\n4. User experience improvements\n   - Added keyboard shortcut guide message\n   - Shortcuts only work when the PDF document area is in focus\n\nğŸ”§ Compatibility check:\n- Highlight creation works on the correct page\n- Text selection works correctly on all pages\n- Zoom/rotate functions are compatible with continuous scrolling\n- Full maintenance of existing props interface\n\nTask 8 complete\n</info added on 2025-07-07T08:57:59.724Z>",
        "testStrategy": "1.  Verify that the control bar updates correctly as the user scrolls.\n2.  Check that the highlight overlay and text selection features continue to function correctly.\n3.  Ensure compatibility with existing zoom and rotation features.\n4.  Test with various PDF documents to ensure consistent behavior.",
        "priority": "high",
        "dependencies": [
          7
        ],
        "status": "done",
        "subtasks": []
      }
    ],
    "metadata": {
      "created": "2025-07-07T08:48:57.524Z",
      "updated": "2025-07-07T08:58:06.018Z",
      "description": "Tasks for pdf-scroll-feature context"
    }
  }
}